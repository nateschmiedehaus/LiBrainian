{
  "name": "librainian",
  "version": "0.2.1",
  "description": "Codebase knowledge and intelligence for coding agents: semantic indexing, confidence-calibrated retrieval, quality gates, and self-healing onboarding.",
  "author": "Nate Schmiedehaus",
  "license": "MIT",
  "homepage": "https://github.com/nateschmiedehaus/LiBrainian#readme",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/nateschmiedehaus/LiBrainian.git"
  },
  "bugs": {
    "url": "https://github.com/nateschmiedehaus/LiBrainian/issues"
  },
  "keywords": [
    "ai",
    "agentic-development",
    "coding-agent",
    "code-intelligence",
    "code-understanding",
    "semantic-search",
    "code-quality",
    "best-practices",
    "mcp",
    "llm",
    "developer-tools",
    "static-analysis",
    "knowledge-graph",
    "codebase-indexing"
  ],
  "type": "module",
  "main": "./dist/index.js",
  "module": "./dist/index.js",
  "types": "./dist/index.d.ts",
  "bin": {
    "librainian": "./dist/cli/index.js",
    "librarian": "./dist/cli/index.js"
  },
  "exports": {
    ".": {
      "import": "./dist/index.js",
      "types": "./dist/index.d.ts"
    },
    "./api": {
      "import": "./dist/api/index.js",
      "types": "./dist/api/index.d.ts"
    },
    "./quality": {
      "import": "./dist/quality/index.js",
      "types": "./dist/quality/index.d.ts"
    },
    "./storage": {
      "import": "./dist/storage/index.js",
      "types": "./dist/storage/index.d.ts"
    },
    "./providers": {
      "import": "./dist/providers/index.js",
      "types": "./dist/providers/index.d.ts"
    },
    "./cli": {
      "import": "./dist/cli/index.js",
      "types": "./dist/cli/index.d.ts"
    },
    "./debug": {
      "import": "./dist/debug/index.js",
      "types": "./dist/debug/index.d.ts"
    },
    "./constructions": {
      "import": "./dist/constructions/index.js",
      "types": "./dist/constructions/index.d.ts"
    },
    "./constructions/registry": {
      "import": "./dist/constructions/registry.js",
      "types": "./dist/constructions/registry.d.ts"
    },
    "./testing": {
      "import": "./dist/testing/index.js",
      "types": "./dist/testing/index.d.ts"
    }
  },
  "files": [
    "dist/**/*.js",
    "dist/**/*.d.ts",
    "dist/migrations/*.sql",
    "!dist/**/*.map",
    "!dist/test/**",
    "!dist/**/__tests__/**",
    "README.md",
    "LICENSE",
    "CHANGELOG.md"
  ],
  "engines": {
    "node": ">=18.0.0"
  },
  "scripts": {
    "build": "tsc && npm run copy-assets",
    "copy-assets": "mkdir -p dist/migrations && cp -r src/migrations/*.sql dist/migrations/",
    "build:watch": "tsc --watch",
    "clean": "rm -rf dist",
    "dev": "node scripts/run-with-tmpdir.mjs -- tsx src/cli/index.ts",
    "test": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=unit -- vitest",
    "test:coverage": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=unit -- vitest --coverage",
    "test:watch": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=unit -- vitest --watch",
    "test:unit": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=unit -- vitest",
    "test:integration": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=integration -- vitest",
    "test:evaluation": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=evaluation -- vitest",
    "test:heavy": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=heavy -- vitest",
    "test:system": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=system -- vitest",
    "test:e2e:acceptance": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=unit -- vitest --run src/__tests__/e2e_acceptance_gate.test.ts",
    "test:sequential": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_WORKERS=1 -- vitest",
    "test:conservative": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_RESOURCE_MODE=conservative -- vitest",
    "test:tier0": "npm test -- --run",
    "test:changed": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_TEST_MODE=unit -- vitest --run --changed",
    "tier1:dogfood": "npm run smoke:external -- --maxRepos 5",
    "lint": "eslint src/ --ext .ts",
    "lint:fix": "eslint src/ --ext .ts --fix",
    "lint:filesize": "node scripts/check-file-sizes.mjs --all",
    "repo:audit": "node scripts/repo-folder-audit.mjs",
    "canon:guard": "node scripts/canon_guard.mjs",
    "complexity:check": "node scripts/complexity_check.mjs",
    "typecheck": "tsc --noEmit",
    "format": "prettier --write 'src/**/*.ts'",
    "format:check": "prettier --check 'src/**/*.ts'",
    "eval:ci": "node scripts/run-with-tmpdir.mjs -- tsx scripts/eval-corpus.ts",
    "eval:ab": "node scripts/run-with-tmpdir.mjs -- tsx scripts/ab-harness.ts",
    "eval:ab:agentic": "node scripts/run-with-tmpdir.mjs -- tsx scripts/ab-harness.ts --taskpack agentic --workers control,treatment --evidenceProfile release --requireAgentCommandTasks --requireBaselineFailureForAgentTasks --minAgentCommandShare 1 --minAgentVerifiedExecutionShare 1 --minArtifactIntegrityShare 1 --maxVerificationFallbackShare 0 --minT3SuccessRateLift 0.25 --requireT3Significance --timeoutMs 420000",
    "eval:ab:agentic-bugfix": "node scripts/run-with-tmpdir.mjs -- tsx scripts/ab-harness.ts --taskpack agentic-bugfix --workers control,treatment --evidenceProfile release --requireAgentCommandTasks --requireBaselineFailureForAgentTasks --minAgentCommandShare 1 --minAgentVerifiedExecutionShare 1 --minArtifactIntegrityShare 1 --maxVerificationFallbackShare 0 --minT3SuccessRateLift 0.25 --requireT3Significance --timeoutMs 420000",
    "eval:ab:agentic-bugfix:codex": "AB_HARNESS_AGENT_CMD=\"node $(pwd)/scripts/ab-agent-codex.mjs\" npm run eval:ab:agentic-bugfix",
    "eval:ab:agentic-bugfix:quick": "AB_HARNESS_AGENT_CMD=\"node $(pwd)/scripts/ab-agent-codex.mjs\" AB_HARNESS_CODEX_MODEL=gpt-5-codex AB_HARNESS_AGENT_TIMEOUT_MS=180000 npm run eval:ab -- --taskpack agentic-bugfix --workers control,treatment --evidenceProfile quick --maxTasks 6 --timeoutMs 180000 --selectionMode adaptive --uncertaintyHistoryPath eval-results/ab-harness-report.json --out eval-results/ab-harness-report.quick.json --requireAgentCommandTasks --requireBaselineFailureForAgentTasks --minAgentCommandShare 1 --minAgentVerifiedExecutionShare 1 --minArtifactIntegrityShare 1 --minT3SuccessRateLift 0 --disableT3CeilingTimeReduction",
    "eval:ab:agentic-bugfix:reference": "AB_HARNESS_AGENT_CMD=\"node $(pwd)/scripts/ab-agent-reference.mjs\" npm run eval:ab -- --taskpack agentic-bugfix --workers control,treatment --evidenceProfile reference --requireAgentCommandTasks --requireBaselineFailureForAgentTasks --minAgentCommandShare 1 --minAgentVerifiedExecutionShare 1 --minArtifactIntegrityShare 1 --minT3SuccessRateLift 0 --disableT3CeilingTimeReduction",
    "eval:live-fire:profiles": "node scripts/run-with-tmpdir.mjs -- tsx src/cli/index.ts live-fire --list-profiles --profiles-file config/live_fire_profiles.json",
    "eval:journey:quick": "node scripts/run-with-tmpdir.mjs -- tsx src/cli/index.ts journey --repos-root eval-corpus/external-repos --max-repos 1 --strict-objective --timeout-ms 60000 --artifacts-dir state/eval/journey --json",
    "eval:smoke:quick": "node scripts/run-with-tmpdir.mjs -- tsx src/cli/index.ts smoke --repos-root eval-corpus/external-repos --max-repos 1 --timeout-ms 60000 --artifacts-dir state/eval/smoke --json",
    "eval:live-fire:quick": "node scripts/run-with-tmpdir.mjs -- tsx src/cli/index.ts live-fire --profile baseline --profiles-file config/live_fire_profiles.json --llm-modes disabled,optional --repos-root eval-corpus/external-repos --max-repos 1 --journey-timeout-ms 60000 --smoke-timeout-ms 60000 --artifacts-dir state/eval/live-fire/quick --output state/eval/live-fire/quick/report.json --json",
    "eval:live-fire:baseline": "node scripts/run-with-tmpdir.mjs -- tsx src/cli/index.ts live-fire --profile baseline --profiles-file config/live_fire_profiles.json --repos-root eval-corpus/external-repos --artifacts-dir state/eval/live-fire --json",
    "eval:live-fire:hardcore": "node scripts/run-with-tmpdir.mjs -- tsx src/cli/index.ts live-fire --profile hardcore --profiles-file config/live_fire_profiles.json --repos-root eval-corpus/external-repos --artifacts-dir state/eval/live-fire --output state/eval/live-fire/hardcore/report.json --json",
    "eval:live-fire:matrix": "node scripts/run-with-tmpdir.mjs -- tsx src/cli/index.ts live-fire --matrix --profiles baseline,hardcore,soak --profiles-file config/live_fire_profiles.json --repos-root eval-corpus/external-repos --artifacts-dir state/eval/live-fire --json",
    "eval:live-fire:drift-guard": "node scripts/run-with-tmpdir.mjs -- tsx scripts/live-fire-drift-guard.ts",
    "eval:live-fire:timeout-guard": "node scripts/run-with-tmpdir.mjs -- tsx scripts/live-fire-timeout-guard.ts",
    "eval:publish-gate": "npm run canon:guard && npm run complexity:check && npm run evidence:refresh && node scripts/run-with-tmpdir.mjs -- tsx src/cli/index.ts publish-gate --json --zero-warning",
    "eval:testing-discipline": "node scripts/run-with-tmpdir.mjs -- tsx scripts/eval-testing-discipline.ts",
    "eval:testing-tracker": "node scripts/run-with-tmpdir.mjs -- tsx scripts/eval-testing-tracker.ts",
    "eval:openclaw:integration": "node scripts/run-with-tmpdir.mjs -- tsx scripts/eval-openclaw-integration.ts",
    "eval:compositions:utility": "node scripts/run-with-tmpdir.mjs -- tsx scripts/eval-composition-utility.ts",
    "eval:use-cases:agentic": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_LLM_PROVIDER=codex --set WAVE0_LLM_PROVIDER=codex --set LLM_PROVIDER=codex --set LIBRARIAN_LLM_MODEL=gpt-5-codex --set CODEX_MODEL=gpt-5-codex --set CODEX_TIMEOUT_MS=180000 --set LIBRARIAN_USE_CASE_QUERY_TIMEOUT_MS=180000 --set CLAUDE_TIMEOUT_MS=20000 -- tsx scripts/agentic-use-case-review.ts --reposRoot eval-corpus/external-repos --matrixPath docs/librarian/USE_CASE_MATRIX.md --maxRepos 8 --maxUseCases 120 --selectionMode probabilistic --uncertaintyHistoryPath eval-results/agentic-use-case-review.json --evidenceProfile release --progressive --minPassRate 0.75 --minEvidenceRate 0.9 --minUsefulSummaryRate 0.8 --maxStrictFailureShare 0 --minPrerequisitePassRate 0.75 --minTargetPassRate 0.75 --minTargetDependencyReadyShare 1 --artifactRoot state/eval/use-case-review --runLabel release",
    "eval:use-cases:agentic:quick": "node scripts/run-with-tmpdir.mjs --set LIBRARIAN_LLM_PROVIDER=codex --set LLM_PROVIDER=codex --set LIBRARIAN_LLM_MODEL=gpt-5-codex --set CODEX_MODEL=gpt-5-codex --set CODEX_TIMEOUT_MS=120000 --set CLAUDE_TIMEOUT_MS=20000 --set LIBRARIAN_CROSS_ENCODER=0 -- tsx scripts/agentic-use-case-review.ts --reposRoot eval-corpus/external-repos --matrixPath docs/librarian/USE_CASE_MATRIX.md --maxRepos 2 --maxUseCases 20 --selectionMode adaptive --evidenceProfile quick --uncertaintyHistoryPath eval-results/agentic-use-case-review.json --out eval-results/agentic-use-case-review.quick.json --progressive --deterministicQueries --minPassRate 0.6 --minEvidenceRate 0.8 --minUsefulSummaryRate 0.7 --maxStrictFailureShare 0 --minPrerequisitePassRate 0.6 --minTargetPassRate 0.6 --minTargetDependencyReadyShare 1 --artifactRoot state/eval/use-case-review --runLabel quick",
    "eval:trial-by-fire:quick": "npm run eval:journey:quick && npm run eval:smoke:quick && npm run eval:live-fire:quick && npm run eval:ab:agentic-bugfix:reference && npm run eval:publish-gate",
    "eval:trial-by-fire:publish": "npm run eval:journey:quick && npm run smoke:external:all && npm run eval:live-fire:hardcore && npm run eval:use-cases:agentic && npm run eval:ab:agentic-bugfix:codex && npm run eval:testing-discipline && npm run eval:testing-tracker && npm run eval:publish-gate",
    "test:agentic:strict": "npm run eval:ab:agentic-bugfix:codex && npm run eval:use-cases:agentic && npm run eval:live-fire:hardcore && npm run smoke:external:all && npm run eval:testing-discipline && npm run eval:testing-tracker && npm run eval:publish-gate",
    "test:agentic:strict:quick": "npm run eval:ab:agentic-bugfix:quick && npm run eval:use-cases:agentic:quick && npm run eval:live-fire:quick && npm run smoke:external:sample",
    "ground-truth:external": "node scripts/run-with-tmpdir.mjs -- tsx scripts/external-ground-truth.ts",
    "issues:plan": "node scripts/run-with-tmpdir.mjs -- tsx scripts/issue-feedback-loop.ts --repo nateschmiedehaus/LiBrainian --state open --out state/plans/agent-issue-fix-plan.json",
    "policy:pull": "node scripts/gh-flow-policy-check.mjs --mode pull",
    "policy:merge": "node scripts/gh-flow-policy-check.mjs --mode merge",
    "policy:publish": "node scripts/gh-flow-policy-check.mjs --mode publish --require-clean",
    "gh:autoland": "node scripts/gh-autoland.mjs",
    "gh:ship": "npm run policy:merge && node scripts/gh-autoland.mjs --preflight-npm-script validate:fast",
    "gh:prs:stabilize:dry-run": "node scripts/gh-pr-stabilize.mjs --dry-run",
    "gh:prs:stabilize": "node scripts/gh-pr-stabilize.mjs",
    "gh:cadence": "npm run policy:pull && npm run gh:prs:stabilize && npm run gh:branches:cleanup",
    "gh:branches:dry-run": "node scripts/gh-branch-hygiene.mjs --dry-run",
    "gh:branches:cleanup": "node scripts/gh-branch-hygiene.mjs",
    "librainian:update": "node scripts/run-with-tmpdir.mjs -- npx tsx src/cli/index.ts update",
    "librainian:update:staged": "node scripts/run-with-tmpdir.mjs -- npx tsx src/cli/index.ts update --staged",
    "hooks:update-index": "node scripts/hook-update-index.mjs",
    "hooks:install": "lefthook install",
    "prepare": "npm run hooks:install",
    "smoke:external": "node scripts/run-with-tmpdir.mjs -- tsx scripts/external-repo-smoke.ts",
    "smoke:external:sample": "node scripts/run-with-tmpdir.mjs -- tsx scripts/external-repo-smoke.ts --repoNames typedriver-ts,token-explorer-py,tlsproxy-go --repoTimeoutMs 120000 --artifactRoot state/eval/smoke/external --runLabel sample-ts-py-go",
    "smoke:external:all": "node scripts/run-with-tmpdir.mjs -- tsx scripts/external-repo-smoke.ts --artifactRoot state/eval/smoke/external --runLabel all-repos",
    "package:assert-identity": "node scripts/assert-package-identity.mjs",
    "package:assert-release-provenance": "node scripts/assert-release-provenance.mjs",
    "package:install-smoke": "node scripts/package-install-smoke.mjs",
    "public:pack": "node scripts/public-pack-check.mjs",
    "security:audit-network": "node scripts/security-network-audit.mjs",
    "validate:public": "npm run repo:audit && npm run public:pack && npm run evidence:drift-check && npm test -- --run src/__tests__/github_readiness_docs.test.ts src/__tests__/package_release_scripts.test.ts src/__tests__/npm_publish_workflow.test.ts",
    "validate:fast": "npm run typecheck && npm run test:changed && npm run validate:public",
    "validate:full": "npm run typecheck && npm test -- --run && npm run validate:public && npm run package:assert-identity && npm run package:install-smoke",
    "evidence:manifest": "node scripts/build-evidence-manifest.mjs",
    "evidence:reconcile": "node scripts/reconcile_evidence.mjs",
    "evidence:sync": "npm run evidence:manifest && npm run evidence:reconcile",
    "evidence:drift-check": "node scripts/run-with-tmpdir.mjs -- tsx scripts/evidence-drift-guard.ts",
    "evidence:refresh": "node scripts/refresh-final-verification.mjs --max-samples 6 --benchmark-timeout-ms 45000 && npm run evidence:sync",
    "release:pack": "npm run package:assert-identity && npm run clean && npm run build && npm run package:install-smoke && npm pack",
    "release:dry-run": "npm run release:pack",
    "dogfood": "node scripts/dogfood-sandbox.mjs",
    "prepublishOnly": "npm run package:assert-identity && npm run package:assert-release-provenance && npm run clean && npm run build && npm run package:install-smoke",
    "release:qualify": "npm run validate:full && npm run test:agentic:strict",
    "release:github-packages": "node scripts/publish-github-package.mjs",
    "release:github": "npm publish --provenance --access public && npm run release:github-packages",
    "release": "npm run policy:publish && npm run release:github"
  },
  "dependencies": {
    "@modelcontextprotocol/sdk": "^1.26.0",
    "@xenova/transformers": "^2.17.2",
    "better-sqlite3": ">=11.0.0",
    "chalk": "^5.3.0",
    "cli-progress": "^3.12.0",
    "commander": "^12.0.0",
    "execa": "^9.0.0",
    "glob": "^11.0.0",
    "minimatch": "^10.0.0",
    "ora": "^8.0.0",
    "proper-lockfile": "^4.1.2",
    "strip-json-comments": "^5.0.0",
    "table": "^6.8.0",
    "tree-sitter": "0.21.1",
    "typescript": "^5.6.0",
    "ts-morph": ">=24.0.0",
    "yaml": "^2.4.0",
    "zod": "^3.23.0"
  },
  "optionalDependencies": {
    "tree-sitter-bash": "0.23.3",
    "tree-sitter-c": "0.23.1",
    "tree-sitter-c-sharp": "0.23.1",
    "tree-sitter-cpp": "0.23.4",
    "tree-sitter-css": "0.23.1",
    "tree-sitter-dart": "1.0.0",
    "tree-sitter-go": "0.23.4",
    "tree-sitter-html": "0.23.2",
    "tree-sitter-java": "0.23.5",
    "tree-sitter-javascript": "0.23.1",
    "tree-sitter-json": "0.24.8",
    "tree-sitter-kotlin": "0.3.8",
    "tree-sitter-lua": "2.1.3",
    "tree-sitter-php": "0.23.12",
    "tree-sitter-python": "0.23.4",
    "tree-sitter-ruby": "0.23.1",
    "tree-sitter-rust": "0.23.1",
    "tree-sitter-scala": "0.24.0",
    "tree-sitter-sql": "0.1.0",
    "tree-sitter-swift": "0.6.0",
    "tree-sitter-typescript": "0.23.2",
    "tree-sitter-yaml": "0.5.0"
  },
  "peerDependencies": {
    "@anthropic-ai/sdk": ">=0.30.0",
    "@modelcontextprotocol/sdk": "^1.26.0",
    "better-sqlite3": ">=11.0.0",
    "openai": ">=4.0.0",
    "ts-morph": ">=24.0.0"
  },
  "peerDependenciesMeta": {
    "@anthropic-ai/sdk": {
      "optional": true
    },
    "@modelcontextprotocol/sdk": {
      "optional": true
    },
    "better-sqlite3": {
      "optional": true
    },
    "openai": {
      "optional": true
    },
    "ts-morph": {
      "optional": true
    }
  },
  "devDependencies": {
    "@types/better-sqlite3": "^7.6.11",
    "@types/cli-progress": "^3.11.0",
    "@types/node": "^22.0.0",
    "@types/proper-lockfile": "^4.1.4",
    "@typescript-eslint/eslint-plugin": "^8.0.0",
    "@typescript-eslint/parser": "^8.0.0",
    "@vitest/coverage-v8": "^2.0.0",
    "eslint": "^9.0.0",
    "lefthook": "^1.11.12",
    "lint-staged": "^15.5.2",
    "prettier": "^3.3.0",
    "tsx": "^4.19.0",
    "vitest": "^2.0.0"
  },
  "lint-staged": {
    "*.{ts,tsx,js,jsx,mjs,cjs}": [
      "node scripts/hook-update-index.mjs"
    ]
  },
  "publishConfig": {
    "access": "public",
    "registry": "https://registry.npmjs.org/"
  }
}
